
# Docker 도커

### ✔ 요약
> **도커**는 컨테이너 기반의 오픈소스 가상화 플랫폼으로 프로그램의 배포 및 관리를 단순하게 해줍니다.  
> **컨테이너**는 격리된 프로세스가 독립적으로 실행되어 가볍고 빠르게 동작한다.  
> **이미지**는 **컨테이너 실행에 필요한 파일과 설정값 등을 포함**하고 있는 것으로 상태값을 가지지 않고 변하지 않습니다.  
> 컨테이너는 이미지를 실행한 상태라고 볼 수 있고 추가되거나 변하는 값은 컨테이너에 저장됩니다.  

<br/>
<br/>

일반적으로 서버를 관리한다는 건 복잡하고 어려우며 고급 개발자의 섬세한 작업이 필요한 영역이다.  
새로운 서버를 셋팅하는 날은 밤을 새는 날이었고 배포판이 바뀌거나 환경이 달라지면 문제가 생기는 일이 빈번했다.  

`DevOps`의 등장으로 개발주기가 짧아지면서 배포는 더 자주 이루어지고 마이크로서비스 아키텍쳐가 유행하면서 프로그램은 
더 잘게 쪼개어져 관리는 더 복잡해졌다. 새로운 툴은 계속해서 나오고 클라우드의 발전으로 설치해야 할 서버가 수백, 수천대에 
이르는 (답없는) 상황에서 `도커(Docker)` 가 등장하고 서버관리 방식이 완전히 바뀌게 됩니다.  

## 도커(Docker)
* 도커는 **컨테이너 기반의 오픈소스 가상화 플랫폼**입니다.  
* 실제 화물 수송용 박스인 컨테이너는 다양한 화물을 넣을 수 있고 규격화되어 다양한 운송수단으로 쉽게 옮길 수 있습니다.  
* 서버에서 이야기하는 컨테이너도 이와 비슷하게 다양한 프로그램, 실행환경을 컨테이너로 추상화하고 동일한 인터페이스를 제공하여 
프로그램의 배포 및 관리를 단순하게 해줍니다.  
* 백엔드 프로그램, 데이터베이스 서버, 메시지 큐등 어떤 프로그램도 컨테이너로 추상화할 수 있고 
`조립PC`, `AWS`, `Azure`, `Google cloud`등 어디에서든 실행할 수 있습니다.

컨테이너를 가장 잘 사용하고 있는 기업은 구글인데 2014년 발표 에 따르면 구글은 모든 서비스들이 컨테이너로 동작하고 매주 20억 개의 컨테이너를 구동 한다고 합니다.   

### 컨테이너(Container)
* 컨테이너는 **격리된 공간에서 프로세스가 동작하는 기술**입니다.
* 가상화 기술의 하나지만 기존방식과는 차이가 있다.
  * 기존의 가상화 방식
    * 주로 OS를 가상화한다. 
    * 호스트 OS위에 게스트 OS 전체를 가상화하여 사용하는 방식 (전가상화) _ex) VMware, VirtualBox_
      * 비교적 사용법이 간단하지만 무겁고 느려서 운영환경에선 사용할 수 없다.
    * CPU의 가상화 기술을 이용한 KVM(Kernel-based Virtual Machine)과 반가상화(Paravirtualization)방식의 Xen (반가상화) _ex) OpenStack, AWS, Rackspace_
      * 호스트형 가상화 방식(전가상화)에 비해 성능 향상
      * 클라우드 서비스에서 가상 컴퓨팅 기술의 기반
    * **전가상화든 반가상화든 추가적인 OS 설치가 필요하여 성능문제가 있었다.**
* 컨테이너의 가상화 방식: **프로세스 격리**
  * 단순히 프로세스를 격리시키기 때문에 가볍고 빠르게 동작한다.
  * CPU나 메모리는 프로세스가 필요한 만큼만 추가로 사용하고 성능적으로도 거의 손실이 없다.
* 하나의 서버에 여러개의 컨테이너를 실행하면 서로 영향을 미치지 않고 독립적으로 실행되어 마치 가벼운 VM(Virtual Machine)을 사용하는 느낌을 줍니다.

### 이미지 (Docker Image)
* 도커에서 가장 중요한 개념은 컨테이너와 함께 이미지라는 개념입니다. 
* 이미지는 **컨테이너 실행에 필요한 파일과 설정값 등을 포함**하고 있는 것으로 상태값을 가지지 않고 변하지 않습니다. 👉 `Immutable`
* **** 
* 같은 이미지에서 여러 개의 컨테이너를 생성할 수 있고 컨테이너의 상태가 바뀌거나 컨테이너가 삭제되더라도 이미지는 변하지 않고 그대로 남아있습니다.
* 이미지는 **컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 더 이상 의존성 파일을 컴파일하고 이것저것 설치할 필요가 없습니다.**
* 새로운 서버가 추가되면 미리 만들어 놓은 이미지를 다운받고 컨테이너를 생성만 하면 됩니다. 
  * 한 서버에 여러개의 컨테이너를 실행할 수 있고, 수백 ~ 수천대의 서버도 문제없습니다.


[참고](https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html)